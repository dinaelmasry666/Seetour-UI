<div class="row justify-content-center">
  <div class="d-flex justify-content-center flex-wrap gy-4">
    <div class="col-12 col-lg-9 mx-auto bg-light border rounded p-3">

      <div class="d-flex flex-row justify-content-between">
        <h3 class="m-3">{{DisplayTitle}}</h3>

        <a *ngIf="MoreText" [routerLink]="[link]" class="btn d-block">
          <h6 class="m-3">{{MoreText}}</h6>
        </a>
      </div>

      <div class="d-flex flex-row overflow-auto align-items-stretch">

        <div class="m-2 text-center d-flex flex-column" style="width: 22rem;" *ngFor="let booking of bookings">

          <div class="card p-1 position-relative">

            <p class="mb-1">{{booking.createdAt | truncate:16:false:"" }}</p>
            <p class="m-0">Seats: {{booking.seats}}</p>

            <div *ngIf="CanCancel || CanReport"
            class="dropdown dropdown-menu-end position-absolute top-0 end-0">

              <button class="btn pe-1" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <ul class="dropdown-menu bg-light">

                <li>
                  <button *ngIf="CanReport"
                  class="btn dropdown-item">
                    Report
                  </button>
                </li>

                <li>
                  <button *ngIf="CanCancel"
                  [disabled]="!booking.canCancel"
                  class="btn dropdown-item">
                    Cancel
                  </button>
                </li>

              </ul>
            </div>

          </div>

          <app-tour-card class="flex-grow-1" [tour]="booking.tourCard">
          </app-tour-card>

          <button *ngIf="CanReview"
          [disabled]="!booking.canReview"
          (click)="Review(booking)"
          class="btn btn-primary">
            Review
          </button>

        </div>

        <ng-container *ngIf="Bookings; else elseTemplate">

          <p *ngIf="!Bookings.length" class="mx-auto text-center mb-0 mt-3">
            No booked tours found
          </p>

        </ng-container>
        <ng-template #elseTemplate>

          <app-spinner class="flex-grow-1"></app-spinner>

        </ng-template>

      </div>

      <app-customer-review-form *ngIf="CanReview" [bookedtourId]="ReviewTourbookingId"
      [TourTitle]="ReviewTourbookingTitle??''" (Reviewed)="Reviewed()">

      </app-customer-review-form>

    </div>
  </div>
</div>

